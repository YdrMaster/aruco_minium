本文档记录算法测试时遇到问题以及解决方法，用于日常查阅、问题分析。

# 软硬件环境

1. Ubuntu 开发机：开发、测试aruco算法
2. 自有相机模组：最终测试产品设备
3. 树莓派设备：算法运行设备
4. 手机：图像采集、推流服务器设备
5. IP摄像头app：运行于手机，用于提供图像采集以及
rtsp推流服务

# 问题详情

## 一.使用自有相机模组与无法与本demo程序连接

**问题描述**：aruco算法能够获取手机app `IP摄像头` 提供的推流服务并且已经调试成功后，在与自有相机模组联调时仍未显示图像信息。

**原因分析**：调试后发现，模组在传输图像阶段仅支持UDP协议，而调试平台（Ubuntu开发机)默认使用TCP协议。


**解决方案**：在运行aruco算法前增加环境变量 `OPENCV_FFMPEG_CAPTURE_OPTIONS`。

```shell
export OPENCV_FFMPEG_CAPTURE_OPTIONS='rtsp_transport;udp'
```

## 二. 自有相机模组采集图像后aruco算法无法/很少获取标识

**问题描述**：在前期测试算法时，aruco算法可以识别到手机采集图像中的全部标记。而在使用自有相机模组采集图像时却发现该算法无法识别大部分标记，无法进行相机标定，只有少部分标记可被偶尔识别。

**原因分析**：测试结果确定为自有相机模组采集到的图片进行水平方向镜像，导致标志内容与算法字典中大部分标签无法匹配，进而识别失败。

**解决方案**：在相机模组端对采集的图像进行水平翻转。


